"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2734],{2734:function(e,t,l){l.r(t),l.d(t,{default:function(){return y}});var n=l(57437),r=l(24232),a=l(2265),i=l(47907),s=l(82813);l(21851);var o=l(65615),u=l(32153),c=l(91723),d=l(54887),m=l(79517),f=(e,t,l)=>{let[r,i]=(0,a.useState)(!1),[s,o]=(0,a.useState)(()=>{}),[u,f]=(0,a.useState)(!1);return{confirmChanges:()=>u?Promise.resolve(!0):(i(!0),new Promise(e=>{o(()=>e)})),ConfirmDialogComponent:r?(0,d.createPortal)((0,n.jsx)(m.Z,{isOpen:!0,children:(0,n.jsx)("div",{className:"xl:scale-65 xxl:scale-80 lg:scale-65 md:scale-50 sm:scale-40",children:(0,n.jsx)(c.Z,{variant:l,label:e,onConfirm:()=>{i(!1),t(),s(!0)},onCancel:()=>{i(!1),s(!1)}})})}),document.body):null,setSkipConfirm:f}},p=l(30408),h=l(58640),b=l(69878);let g=async e=>{let t=new FormData;return t.append("image",e),await (0,b.Z)("".concat(h._,"/api/v1/web/images"),{method:"POST",body:t})},v=(0,r.default)(()=>Promise.resolve().then(l.t.bind(l,65615,23)),{loadableGenerated:{webpack:()=>[65615]},ssr:!1});o.Quill.register("modules/ImageResize",s.y);let w=(0,a.forwardRef)((e,t)=>{let{width:l,height:r,setEditorHtml:s,initialContent:c}=e,[d,m]=(0,u.FV)(p.D),[h,b]=(0,u.FV)(p.f),w=(0,i.useRouter)(),y=(0,a.useRef)(null),{confirmChanges:k,ConfirmDialogComponent:x}=f("작성한 내용은 저장되지 않았습니다. \\n 페이지를 벗어나시겠습니까?",()=>{if(y.current){let e=y.current;y.current=null,w.push(e)}},"red"),C=async()=>{let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.style.display="none",document.body.appendChild(e),e.click(),e.onchange=async()=>{let t=e.files?e.files[0]:null;if(t)try{let e=(await g(t)).information.imageUrl;b(t=>[...t,e]);let n=document.querySelector(".ql-editor");if(n){var l;let t=null===(l=window.getSelection())||void 0===l?void 0:l.getRangeAt(0);if(t){let l=document.createElement("img");l.src=e,l.alt="image",t.insertNode(l),s(n.innerHTML),m(!0)}}}catch(e){console.error("이미지 업로드 실패:",e)}}};(0,a.useEffect)(()=>{let e=e=>{d&&(e.preventDefault(),e.returnValue="")};window.addEventListener("beforeunload",e);let t=w.push,l=w.replace,n=async(e,l)=>{if(!d)return t(e,l);y.current=e,await k()&&t(e,l)};return w.push=(e,t)=>n(e,t),w.replace=(e,t)=>n(e,t),()=>{window.removeEventListener("beforeunload",e),w.push=t,w.replace=l}},[d,k,w]);let E=(0,a.useMemo)(()=>({toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],handlers:{image:C}},clipboard:{matchVisual:!1},ImageResize:{parchment:o.Quill.import("parchment"),modules:["Resize","DisplaySize"]}}),[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:t,style:{width:l,height:r},children:(0,n.jsx)(v,{style:{width:l,height:r},theme:"snow",onChange:e=>{s(e),m(!0)},modules:E,formats:["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],defaultValue:c})}),x]})});w.displayName="QuillEditor";var y=(0,r.default)(()=>Promise.resolve(w),{ssr:!1})}}]);