(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931,5776],{46844:function(e,t,s){Promise.resolve().then(s.bind(s,9948))},47907:function(e,t,s){"use strict";var a=s(15313);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},46426:function(e,t){"use strict";t.J=void 0,t.J=(e={})=>{if("undefined"==typeof window)return{persistAtom:()=>{}};let{key:t="recoil-persist",storage:s=localStorage,converter:a=JSON}=e,r=(e,t,s,a)=>{a?delete t[s]:t[s]=e,l(t)},n=()=>{let e=s.getItem(t);return null==e?{}:"string"==typeof e?i(e):"function"==typeof e.then?e.then(i):{}},i=e=>{if(void 0===e)return{};try{return a.parse(e)}catch(e){return console.error(e),{}}},l=e=>{try{"function"==typeof s.mergeItem?s.mergeItem(t,a.stringify(e)):s.setItem(t,a.stringify(e))}catch(e){console.error(e)}};return{persistAtom:({onSet:e,node:t,trigger:s,setSelf:a})=>{if("get"===s){let e=n();"function"==typeof e.then&&e.then(e=>{e.hasOwnProperty(t.key)&&a(e[t.key])}),e.hasOwnProperty(t.key)&&a(e[t.key])}e(async(e,s,a)=>{let i=n();"function"==typeof i.then?i.then(s=>r(e,s,t.key,a)):r(e,i,t.key,a)})}}}},9948:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(57437),r=s(57963),n=s(58640),i=s(89652),l=s(77871);let o=async e=>{let{loginId:t,password:s}=e,a=await fetch("".concat(n._,"/api/v1/auth/sign-in"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loginId:t,password:s})});if(!a.ok)throw Error("Failed");let r=await a.json();return l.Z.saveToken(i.L,r.information.accessToken),l.Z.saveToken(i.z,r.information.refreshToken),r};var c=s(79517),A=s(85776),d=s(2265),u=e=>{let{label:t,disabled:s,...r}=e;return(0,a.jsx)("button",{...r,disabled:s,className:"H1 w-405 h-71 rounded-full text-white bg-blue-blue30 disabled:bg-blue-blue20 hover:bg-blue-blue40 hover:hover-transition active:bg-blue-blue50",children:t})},h=e=>{let{input:t,setInput:s,placeholder:r,type:n,...i}=e;return(0,a.jsx)("input",{...i,className:"".concat(t?"border-gray-grayscale50":"border-gray-grayscale30"," H2  border-[1.5px]  outline-none focus:border-gray-grayscale30 px-21 w-414 h-59 rounded-20 text-gray-grayscale50 placeholder:text-gray-grayscale30"),placeholder:r,type:n,value:t,onChange:e=>{s(e.target.value)},required:!0})},g=s(15792),m=s(66111),f=s(32153),p=e=>{let{loginId:t,setLoginId:s,password:r,setPassword:n,handleLogin:i,loginBtnDisabled:l,newPassword:o,setNewPassword:p,confirmedPassword:x,setConfirmedPassword:b,errorMessage:w,isPWEditMode:y,setIsPWEditMode:k}=e,[j,C]=(0,d.useState)(""),[v,N]=(0,f.FV)(m.B);return(0,a.jsxs)(a.Fragment,{children:[v.passwordSecure&&(0,a.jsx)(c.Z,{isOpen:v.passwordSecure,children:(0,a.jsx)(g.Z,{variant:"red",label:"비밀번호 변경을 위해 보안코드를 입력해주세요",onClose:()=>{N(e=>({...e,passwordSecure:!1})),C("")},secure:j,setSecure:C,activatePasswordEdit:()=>{k(!0)}})}),(0,a.jsx)("div",{className:"w-510 h-485 bg-white rounded-[12.35px] shadow-lg flex flex-col items-center justify-center",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"H1 text-gray-grayscale50 mb-30",children:"비밀번호 재설정"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-19",children:(0,a.jsx)(h,{input:o,setInput:p,placeholder:"새 비밀번호",type:"password"})}),(0,a.jsx)("div",{className:"mb-19",children:(0,a.jsx)(h,{input:x,setInput:b,placeholder:"새 비밀번호 확인",type:"password"})}),(0,a.jsx)("div",{className:"flex mx-auto mb-15 w-356 caption-1 text-gray-grayscale40 text-center",children:"영문 대문자와 소문자, 숫자, 특수문자 중 2가지 이상을 조합하여 6~20자로 입력해주세요."}),(0,a.jsx)(u,{onClick:()=>N(e=>({...e,passwordConfirm:!0})),label:"비밀번호 변경",disabled:!(o&&x&&!w)}),(0,a.jsx)("div",{className:"H4 text-red-red20 flex justify-center mt-10 items-center text-center",children:w})]})]}):(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)("h1",{className:"H1 text-gray-grayscale50 mb-31",children:"도미즈 관리자 로그인"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-19",children:(0,a.jsx)(h,{input:t,setInput:s,placeholder:"아이디",type:"text"})}),(0,a.jsx)("div",{className:"mb-19",children:(0,a.jsx)(h,{input:r,setInput:n,placeholder:"비밀번호",type:"password"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center  mb-27 px-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-8 ",children:[(0,a.jsx)(A.default,{isChecked:!1,setIsChecked:function(e){throw Error("Function not implemented.")}}),(0,a.jsx)("span",{className:"alert-cap text-black",children:"자동 로그인"})]}),(0,a.jsx)("div",{onClick:()=>N(e=>({...e,passwordSecure:!0})),className:"cursor-pointer H4 text-blue-blue30",children:"비밀번호 찾기"})]}),(0,a.jsx)(u,{onClick:()=>i({loginId:t,password:r}),label:"로그인",disabled:l})]})]})})]})},x=s(42825),b=s(91723),w=s(79467),y=s(12953),k=s(22509),j={src:"/_next/static/media/LoginLogo.0bc2ec04.png",height:137,width:372,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAGFBMVEX///////////////////////////////8pK8DIAAAACHRSTlNpn7BLeYguWbSL0JsAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAeSURBVHicBcGBAQAwDIIwULv/T17CrdrASYID+xh8Au4AMXgegrYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},C=s(20703),v=s(47907),N=()=>{let[e,t]=(0,d.useState)(""),[s,n]=(0,d.useState)(""),[A,u]=(0,d.useState)(""),[h,g]=(0,d.useState)(""),[N,E]=(0,d.useState)(""),[S,U]=(0,f.FV)(m.B),[R,B]=(0,d.useState)(!1),I=(0,v.useRouter)(),T=(0,f.Zl)(y.L),M=(0,f.Zl)(y.Y),L=async e=>{let{loginId:t,password:s}=e;try{let e=await o({loginId:t,password:s});if(e){let t=e.information.accessToken,s=e.information.refreshToken;T(t),M(s),l.Z.saveToken(i.L,t),l.Z.saveToken(i.z,s),console.log("Access Token (Recoil):",t),console.log("Refresh Token (Recoil):",s),console.log("Access Token (LocalStorage):",l.Z.getToken(i.L)),console.log("Refresh Token (LocalStorage):",l.Z.getToken(i.z)),alert("로그인 성공"),I.push("/dashboard")}else alert("로그인 실패")}catch(e){console.error(e),alert("로그인 중 오류가 발생했습니다.")}};(0,d.useEffect)(()=>{A&&!(0,k.u)(A)?E(w.zh.password.messages.invalid):A&&h&&A!==h?E(w.zh.password.messages.mismatch):E("")},[A,h]);let V=e=>{U(t=>({...t,[e]:!0}))},Z=e=>{U(t=>({...t,[e]:!1}))},F=async()=>{try{await (0,r.GN)(A),Z("passwordConfirm"),V("passwordChanged")}catch(e){Z("passwordConfirm"),V("passwordFailed")}};return(0,a.jsxs)(a.Fragment,{children:[S.passwordConfirm&&(0,a.jsx)(c.Z,{isOpen:S.passwordConfirm,children:(0,a.jsx)(b.Z,{variant:"blue",label:"비밀번호를 변경하시겠습니까?",onConfirm:F,onCancel:()=>Z("passwordConfirm")})}),S.passwordChanged&&(0,a.jsx)(c.Z,{isOpen:S.passwordChanged,children:(0,a.jsx)(x.Z,{variant:"blue",label:"비밀번호를 성공적으로 변경하였습니다.",onConfirm:()=>{Z("passwordChanged"),u(""),g("")}})}),S.passwordFailed&&(0,a.jsx)(c.Z,{isOpen:S.passwordFailed,children:(0,a.jsx)(x.Z,{variant:"red",label:"비밀번호 변경에 실패했습니다. 다시 시도해주세요.",onConfirm:()=>Z("passwordFailed")})}),(0,a.jsx)("div",{style:{backgroundImage:"url(".concat("/_next/static/media/LoginBackgroundImg.38090d6f.png",")"),width:"100%",height:"100vh",backgroundSize:"cover",backgroundPosition:"center"},className:"overflow-y-hidden flex flex-col items-center justify-center",children:(0,a.jsxs)("div",{className:" xl:scale-65 xxl:scale-80 lg:scale-65 md:scale-50 sm:scale-40  flex flex-col items-center justify-center",children:[(0,a.jsx)(C.default,{src:j,width:372,height:136.5,className:"object-cover mb-43",alt:"login logo"}),(0,a.jsx)(p,{loginId:e,setLoginId:t,password:s,setPassword:n,errorMessage:N,newPassword:A,setNewPassword:u,confirmedPassword:h,setConfirmedPassword:g,handleLogin:L,loginBtnDisabled:!e||!s,isPWEditMode:R,setIsPWEditMode:B})]})})]})}},85776:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(57437);s(2265);var r={src:"/_next/static/media/Checked.2a02f83f.png",height:40,width:39,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEU3e941eNg2eNg2edo2e942dtU0ddI2edo3eNk5gOaHhQcyAAAACXRSTlP+/dqx7UQiy4HaUf1QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAMUlEQVR4nB3FyQ3AQAjAQJtjCf03HAk/xmRcyQKH6GaLw+YbsL98s0L1i1Wg6h6CEj8a4AC53DY/oQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},n={src:"/_next/static/media/UnChecked.bea25168.png",height:39,width:39,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAFVBMVEVERERMaXFVVVU/Pz9mZmZ/f39VVVV1Ch9XAAAAB3RSTlN1AAMEBQQGqDJaiQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAACRJREFUeJxjYIADFiYmJiY2BgYGJkZGRkZm/AxWRiYmRhaEZgAKMwBG4KHziQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},i={src:"/_next/static/media/UnCheckedDisabled.533783a4.png",height:20,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAElBMVEXJycnKyspMaXHMzMzMzMzIyMjxNP9bAAAABnRSTlNyZAAUKEKaXv9sAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHklEQVR4nGNggABGBgYmEGAmksEMAiwMDIxgwMAKAAyhAGZ43VKEAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},l=s(20703),o=e=>{let{isChecked:t,setIsChecked:s,disabled:o}=e;return(0,a.jsx)(l.default,{className:"".concat(o?"cursor-default":"cursor-pointer"),src:t?r:o?i:n,alt:t?"Checked":o?"UnChecked":"UnCheckedDisabled",width:19.5,height:19.5,onClick:e=>{o||(e.stopPropagation(),s(!t))}})}},12953:function(e,t,s){"use strict";s.d(t,{L:function(){return n},Y:function(){return i}});var a=s(32153);let{persistAtom:r}=(0,s(46426).J)(),n=(0,a.cn)({key:"accessTokenState",default:null,effects_UNSTABLE:[r]}),i=(0,a.cn)({key:"refreshTokenState",default:null,effects_UNSTABLE:[r]})}},function(e){e.O(0,[691,4898,703,1252,6121,2971,8069,1744],function(){return e(e.s=46844)}),_N_E=e.O()}]);