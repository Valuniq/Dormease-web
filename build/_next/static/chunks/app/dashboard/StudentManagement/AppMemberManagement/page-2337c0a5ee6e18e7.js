(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{9553:function(e,t,s){Promise.resolve().then(s.bind(s,8493))},8493:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var n=s(7437),r=s(2265),a=e=>{let{index:t,id:s,name:r,studentNumber:a,phoneNumber:c,bonusPoint:i,minusPoint:l,createdAt:o}=e;return(0,n.jsxs)("tr",{className:"h-38 hover-transition cursor-pointer hover:bg-gray-grayscale10 active:bg-gray-grayscale20 H4-caption text-gray-grayscale50",children:[(0,n.jsx)("td",{className:"text-center",children:t}),(0,n.jsx)("td",{className:"text-center",children:r}),(0,n.jsx)("td",{className:"text-center",children:a}),(0,n.jsx)("td",{className:"text-center",children:c}),(0,n.jsx)("td",{className:"text-center",children:i}),(0,n.jsx)("td",{className:"text-center",children:l}),(0,n.jsx)("td",{className:"text-center",children:o})]})},c=s(3122),i=s(8640),l=s(7124),o=s(4817);let d=()=>{var e,t,s;let{data:n,error:r,size:a,setSize:c,mutate:d,isValidating:h}=(0,o.ZP)((e,t)=>0===e?"".concat(i._,"/api/v1/web/users/management?page=1"):t&&0===t.information.dataList.length?null:"".concat(i._,"/api/v1/web/users/management?page=").concat(e+1),l.Z,{initialSize:1}),u=n?n.reduce((e,t)=>e.concat(t.information.dataList),[]):[],m=!n&&!r||a>0&&h&&n&&void 0===n[a-1];return{userData:u,error:r,isLoadingMore:m,size:a,setSize:c,isReachingEnd:(null==n?void 0:null===(e=n[0])||void 0===e?void 0:e.information.dataList.length)===0||n&&(null===(t=n[n.length-1])||void 0===t?void 0:t.information.pageInfo.currentPage)===(null===(s=n[n.length-1])||void 0===s?void 0:s.information.pageInfo.totalPage)||!1,mutate:d}};var h=e=>{let{className:t,width:s,height:r,fillColor:a}=e;return(0,n.jsx)("svg",{className:t,width:s,height:r,viewBox:"0 0 16 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M7.29289 0.707107L1.70711 6.29289C1.07714 6.92286 1.52331 8 2.41421 8L13.5858 8C14.4767 8 14.9229 6.92286 14.2929 6.2929L8.70711 0.707108C8.31658 0.316584 7.68342 0.316583 7.29289 0.707107Z",fill:a})})},u=e=>{let{sortConfig:t,setSortConfig:s}=e,{userData:i,isLoadingMore:l,size:o,setSize:u,isReachingEnd:m}=d(),x=(0,r.useRef)(null),g=(0,r.useRef)(null),j=(0,r.useCallback)(e=>{!e[0].isIntersecting||l||m||u(e=>e+1)},[l,m,u]);(0,r.useEffect)(()=>{x.current&&x.current.disconnect(),x.current=new IntersectionObserver(j),g.current&&x.current.observe(g.current)},[j]);let f=e=>t.sortBy===e?t.isAscending?"rotate-0 ":"rotate-180":"",N=e=>t.sortBy===e?"#3678D8":"#323232",v=e=>{s(t=>t.sortBy!==e?{sortBy:e,isAscending:!0}:void 0===t.isAscending?{sortBy:e,isAscending:!0}:!0===t.isAscending?{sortBy:e,isAscending:!1}:{sortBy:void 0,isAscending:void 0})};return(0,n.jsxs)("div",{className:"w-fit h-693 overflow-y-scroll overflow-x-visible border-b-1 border-b-gray-grayscale50",children:[(0,n.jsxs)("table",{className:"w-[1305px]",children:[(0,n.jsxs)("thead",{className:" w-full h-36 bg-white text-gray-grayscale50 sticky top-0 z-1",children:[(0,n.jsxs)("tr",{className:"",children:[(0,n.jsx)("th",{className:"H4",children:"번호"}),(0,n.jsx)("th",{className:"H4",children:"이름"}),(0,n.jsx)("th",{className:"H4",children:"학번"}),(0,n.jsx)("th",{className:"H4",children:"휴대전화"}),(0,n.jsx)("th",{className:"h-30 rounded-8 cursor-pointer",onClick:()=>v("bonusPoint"),style:{backgroundColor:"bonusPoint"===t.sortBy?"#DAE9FF":"transparent"},children:(0,n.jsxs)("div",{className:"H4 flex items-center justify-center text-center ",children:[(0,n.jsx)("h1",{className:"mr-4",children:"상점"}),(0,n.jsx)(h,{className:"object-contain ".concat(f("bonusPoint")),width:16,height:8,fillColor:N("bonusPoint")})]})}),(0,n.jsx)("th",{className:"h-30 rounded-8 cursor-pointer",onClick:()=>v("minusPoint"),style:{backgroundColor:"minusPoint"===t.sortBy?"#DAE9FF":"transparent"},children:(0,n.jsxs)("div",{className:"H4 flex items-center justify-center text-center w-full",children:[(0,n.jsx)("h1",{className:"mr-4",children:"벌점"}),(0,n.jsx)(h,{className:"object-contain ".concat(f("minusPoint")),width:16,height:8,fillColor:N("minusPoint")})]})}),(0,n.jsx)("th",{className:"h-30 rounded-8 cursor-pointer",onClick:()=>v("createdDate"),style:{backgroundColor:"createdDate"===t.sortBy?"#DAE9FF":"transparent"},children:(0,n.jsxs)("div",{className:"H4 flex items-center justify-center text-center w-full",children:[(0,n.jsx)("h1",{className:"mr-4",children:"생성일자"}),(0,n.jsx)(h,{className:"object-contain ".concat(f("createdDate")),width:16,height:8,fillColor:N("createdDate")})]})})]}),(0,n.jsx)("tr",{children:(0,n.jsx)("th",{colSpan:8,children:(0,n.jsx)("div",{className:"w-[1305px] h-18 border-b-1 border-b-gray-grayscale50"})})})]}),i&&i.length>0?(0,n.jsxs)("tbody",{className:"overflow-y-scroll",children:[(0,n.jsx)("tr",{className:"h-15"}),i.map((e,t)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(a,{index:t+1,id:e.id,name:e.name,studentNumber:e.studentNumber,phoneNumber:e.phoneNumber,bonusPoint:e.bonusPoint,minusPoint:e.minusPoint,createdAt:e.createdAt}),(0,n.jsx)("tr",{className:"h-15"})]},"".concat(e.id,"-").concat(t)))]}):(0,n.jsx)("tbody",{children:(0,n.jsx)(c.Z,{colspan:7})})]}),(0,n.jsxs)("div",{ref:g,className:"flex justify-center mt-4",children:[l&&(0,n.jsx)("span",{children:"Loading..."}),m&&(0,n.jsx)("span",{children:"No more data"})]})]})},m=()=>{let[e,t]=r.useState({sortBy:void 0,isAscending:void 0});return(0,n.jsxs)("div",{className:"w-[1250px]",children:[(0,n.jsx)("div",{className:"flex items-center justify-end mb-44",children:(0,n.jsx)("h1",{className:"H0 text-gray-grayscale50 mr-117",children:"앱 회원관리"})}),(0,n.jsx)(u,{sortConfig:e,setSortConfig:t})]})}},3122:function(e,t,s){"use strict";var n=s(7437);s(2265),t.Z=e=>{let{colspan:t}=e;return(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:t,className:"h-full",children:(0,n.jsx)("div",{className:"flex justify-center items-center h-693",children:(0,n.jsx)("h1",{className:"H1 text-gray-grayscale30",children:"리스트가 비었습니다."})})})})}},8640:function(e,t,s){"use strict";s.d(t,{_:function(){return n}});let n="https://www.dormease-dev.kro.kr"},9652:function(e,t,s){"use strict";s.d(t,{L:function(){return n},z:function(){return r}});let n="ACCESS_TOKEN",r="REFRESH_TOKEN"},7124:function(e,t,s){"use strict";var n=s(7871),r=s(9652);let a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.Z.getToken(r.L);if(!s)throw Error("No access token found");let a={...t.headers,Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},c=await fetch(e,{...t,headers:a});if(!c.ok)throw 401===c.status&&(n.Z.removeToken(r.L),n.Z.removeToken(r.z),alert("세션이 만료되었습니다. 다시 로그인해 주세요.")),Error("Failed to fetch data");return c.json()};t.Z=a},7871:function(e,t){"use strict";t.Z={saveToken:(e,t)=>{localStorage.setItem(e,t)},getToken:e=>localStorage.getItem(e),removeToken:e=>{localStorage.removeItem(e)}}}},function(e){e.O(0,[898,817,971,69,744],function(){return e(e.s=9553)}),_N_E=e.O()}]);