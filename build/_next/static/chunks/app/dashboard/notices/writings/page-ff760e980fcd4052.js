(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{91312:function(e,t,a){Promise.resolve().then(a.bind(a,19923))},4550:function(e,t,a){"use strict";a.d(t,{Fp:function(){return f},NE:function(){return o},V2:function(){return r},Zt:function(){return d},bq:function(){return c}});var l=a(58640),n=a(94817),i=a(75518),s=a(81252);let r=()=>{var e,t,a;let{data:s,error:r,size:c,setSize:o,mutate:d}=(0,n.ZP)((e,t)=>t&&0===t.information.dataList.length?null:"".concat(l._,"/api/v1/web/notifications/ANNOUNCEMENT?page=").concat(e+1),i.Z),f=s?s.reduce((e,t)=>e.concat(t.information.dataList),[]):[],m=!s&&!r||c>0&&s&&void 0===s[c-1];return{notificationsData:f,error:r,isLoadingMore:m,size:c,setSize:o,isReachingEnd:(null==s?void 0:null===(e=s[0])||void 0===e?void 0:e.information.dataList.length)===0||s&&(null===(t=s[s.length-1])||void 0===t?void 0:t.information.pageInfo.currentPage)===(null===(a=s[s.length-1])||void 0===a?void 0:a.information.pageInfo.totalPage)||!1,mutate:d}},c=async e=>await (0,i.Z)("".concat(l._,"/api/v1/web/notifications"),{method:"POST",body:e}),o=e=>{let{data:t,error:a}=(0,s.ZP)(e?"".concat(l._,"/api/v1/web/notifications/notification/").concat(e):null,i.Z);return{data:t,error:a,isLoading:!a&&!t}},d=async e=>await (0,i.Z)("".concat(l._,"/api/v1/web/notifications/notification/").concat(e),{method:"DELETE"}),f=async e=>await (0,i.Z)("".concat(l._,"/api/v1/web/notifications"),{method:"PATCH",body:e})},19923:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var l=a(57437),n=a(48871),i=a(2265),s=a(4550),r=a(79467),c=a(47907),o=a(57482),d=a(32153),f=a(28771),m=a(30408),u=a(24232),h=a(20703),x=a(86092),p=a(25273);let g=(0,u.default)(()=>a.e(1837).then(a.bind(a,61837)),{loadableGenerated:{webpack:()=>[61837]},ssr:!1}),b=(0,u.default)(()=>a.e(5776).then(a.bind(a,85776)),{loadableGenerated:{webpack:()=>[85776]},ssr:!1}),y=(0,u.default)(()=>Promise.all([a.e(1866),a.e(9363),a.e(6623),a.e(6616),a.e(6472)]).then(a.bind(a,16472)),{loadableGenerated:{webpack:()=>[16472]},ssr:!1}),w=(0,u.default)(()=>a.e(5081).then(a.bind(a,65081)),{loadableGenerated:{webpack:()=>[65081]},ssr:!1}),N=(0,u.default)(()=>a.e(236).then(a.bind(a,53156)),{loadableGenerated:{webpack:()=>[53156]},ssr:!1}),v=(0,i.forwardRef)((e,t)=>{let{title:a,setTitle:n,writer:s,isPinned:r,setIsPinned:c,fileLists:o,handleFileChange:d,handleDeleteFile:f,handleAllDelete:m,setEditorHtml:u}=e,v=(0,i.useRef)(null);return(0,l.jsxs)("div",{ref:t,className:"xxl:w-full xl:w-800 lg:w-700 md:w-600 w-full  ml-[-80px]",children:[(0,l.jsx)("div",{className:"w-full flex items-center justify-between py-15 border-t-1 border-t-gray-grayscale50",children:(0,l.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,l.jsxs)("div",{className:" flex-1 flex items-center mr-20",children:[(0,l.jsx)("h1",{className:"mr-20 text-nowrap font-medium text-gray-grayscale50",children:"제 목"}),(0,l.jsx)(g,{width:"flex-1",height:"h-30",font:"text-medium",placeholder:"제목을 입력해주세요.",input:a,setInput:n})]}),(0,l.jsxs)("div",{className:"flex-2 flex items-center",children:[(0,l.jsx)(b,{isChecked:r,setIsChecked:c}),(0,l.jsx)("h2",{className:"text-nowrap mx-18  text-gray-grayscale50",children:"최상단 고정"}),(0,l.jsx)(h.default,{src:x.Z,width:13,height:20,className:"object-contain rotate-[-45deg]",alt:"pin"})]})]})}),(0,l.jsxs)("div",{className:"flex items-center py-15 border-y-1 border-y-gray-grayscale30",children:[(0,l.jsx)("h1",{className:"mr-20 text-nowrap font-medium text-gray-grayscale50",children:"작성자"}),(0,l.jsx)("h1",{className:"text-nowrap font-medium text-gray-grayscale40",children:s})]}),(0,l.jsxs)("div",{className:"flex w-full items-center justify-center pt-15 mb-60",children:[(0,l.jsx)("h1",{className:" h-430 items-center flex mr-51 text-nowrap font-medium text-gray-grayscale50",children:"내 용"}),(0,l.jsx)(y,{width:"100%",height:"70svh",setEditorHtml:u})]}),(0,l.jsxs)("div",{className:"flex items-center py-15 border-y-1 border-y-gray-grayscale30",children:[(0,l.jsx)("h1",{className:"font-medium text-gray-grayscale50 mr-20 text-nowrap",children:"첨부파일"}),(0,l.jsx)(w,{font:"font-medium text-13",label:"파일선택",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()}}),(0,l.jsx)("input",{type:"file",ref:v,className:"hidden",multiple:!0,onChange:d}),(0,l.jsx)("div",{className:"overflow-scroll noti-file-scrollbar  ml-20 w-[917px] h-34 rounded-5 flex items-center justify-start px-10 border-1 border-gray-grayscale30",children:o.map((e,t)=>(0,l.jsx)("ul",{className:"mr-10",children:(0,l.jsx)(N,{fileName:e.fileName,handleDelete:()=>f(e.fileName)})},t))}),(0,l.jsx)(h.default,{src:p.Z,width:16,height:18,className:"object-contain ml-13 cursor-pointer",alt:"allDelete",onClick:m})]})]})});v.displayName="NoticeWriting";var j=()=>{let e=(0,c.useRouter)(),t=(0,d.Zl)(m.D),[a,u]=(0,i.useState)([]),[h,x]=(0,i.useState)({title:"",pinned:!1,notificationType:"ANNOUNCEMENT",content:"",imageReqList:[],files:[]}),{showConfirmDialog:p,ConfirmDialogComponent:g}=(0,f.Z)("작성한 내용을 등록하시겠습니까?",async()=>{var l;let n=(null===(l=h.content.match(/<img[^>]+src="([^">]+)"/g))||void 0===l?void 0:l.map(e=>{let t=e.match(/src="([^"]+)"/);return{imageUrl:t?t[1]:""}}))||[],i={...h,imageReqList:n,files:a.map(e=>({file:e.file}))},r=new FormData;r.append("writeNotificationReq",new Blob([JSON.stringify(i)],{type:"application/json"})),a.length>0?a.forEach(e=>{r.append("files",e.file)}):r.append("files",new Blob);try{t(!1),await (0,s.bq)(r),e.push(o.K1)}catch(e){console.error(e),alert("공지사항 등록에 실패했습니다. 다시 시도해주세요.")}},"blue");return(0,l.jsxs)(l.Fragment,{children:[!!g&&g,(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)(v,{title:h.title,setTitle:e=>x(t=>({...t,title:e})),writer:"관리자",isPinned:h.pinned,setIsPinned:e=>x(t=>({...t,pinned:e})),fileLists:a,handleFileChange:e=>{let t=Array.from(e.target.files||[]);a.length+t.length<=r.qo.file.maxCount?u(e=>[...e,...t.map(e=>({fileName:e.name,file:e}))]):alert("파일은 최대 ".concat(r.qo.file.maxCount,"개까지 선택할 수 있습니다."))},handleDeleteFile:e=>{u(t=>t.filter(t=>t.fileName!==e))},handleAllDelete:()=>{u([])},setEditorHtml:e=>x(t=>({...t,content:e}))}),(0,l.jsx)("div",{className:"my-30 xxl:scale-80 xl:scale-65 lg:scale-65 md:scale-50 sm:scale-40",children:(0,l.jsx)(n.Z,{label:"등록",disabled:!1,variant:"blue",onClick:p})})]})]})}}},function(e){e.O(0,[691,703,4898,1252,4817,8895,2971,8069,1744],function(){return e(e.s=91312)}),_N_E=e.O()}]);