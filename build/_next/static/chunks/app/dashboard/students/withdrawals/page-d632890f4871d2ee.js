(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3924],{32353:function(e,t,n){Promise.resolve().then(n.bind(n,94694))},9266:function(e,t,n){"use strict";n.d(t,{_:function(){return i},z:function(){return o}});var a=n(58640),r=n(89652),s=n(77871);let o=async e=>{let{loginId:t,password:n}=e,o=await fetch("".concat(a._,"/api/v1/auth/sign-in"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loginId:t,password:n})});if(!o.ok)throw Error("Failed");let i=await o.json();return s.Z.saveToken(r.L,i.information.accessToken),s.Z.saveToken(r.z,i.information.refreshToken),i},i=async e=>{try{let t=await fetch("".concat(a._,"/api/v1/auth/reissue?refreshToken=").concat(encodeURIComponent(e)),{method:"GET"});if(console.log("reissueToken 응답 상태:",t.status),!t.ok){let e=await t.json();throw console.error("reissueToken 에러 응답:",e),Error("Token reissue failed")}let n=await t.json();if(console.log("reissueToken 성공 응답:",n),n.check&&n.information&&n.information.accessToken)return s.Z.saveToken(r.L,n.information.accessToken),n.information.accessToken;return console.error("reissueToken 응답에 유효한 액세스 토큰이 없습니다:",n),null}catch(e){return console.error("reissueToken 함수 에러:",e),null}}},94694:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n(57437),r=n(58640),s=n(75518),o=n(94817);let i=()=>{var e,t,n;let{data:a,error:i,size:c,setSize:l}=(0,o.ZP)((e,t)=>t&&0===t.information.dataList.length?null:"".concat(r._,"/api/v1/web/users/management/delete?page=").concat(e+1),s.Z),d=a?a.reduce((e,t)=>e.concat(t.information.dataList),[]):[],u=!a&&!i||c>0&&a&&void 0===a[c-1];return{withdrawalData:d,error:i,isLoading:u,size:c,setSize:l,isEndReached:(null==a?void 0:null===(e=a[0])||void 0===e?void 0:e.information.dataList.length)===0||a&&(null===(t=a[a.length-1])||void 0===t?void 0:t.information.pageInfo.currentPage)===(null===(n=a[a.length-1])||void 0===n?void 0:n.information.pageInfo.totalPage)||!1}},c=e=>{var t,n,a;let{data:i,error:c,size:l,setSize:d}=(0,o.ZP)((t,n)=>n&&0===n.information.dataList.length?null:"".concat(r._,"/api/v1/web/users/management/delete/search?page=").concat(t+1,"&keyword=").concat(e),s.Z),u=i?i.reduce((e,t)=>e.concat(t.information.dataList),[]):[],h=!i&&!c||l>0&&i&&void 0===i[l-1];return{withdrawalData:u,error:c,isLoading:h,size:l,setSize:d,isEndReached:(null==i?void 0:null===(t=i[0])||void 0===t?void 0:t.information.dataList.length)===0||i&&(null===(n=i[i.length-1])||void 0===n?void 0:n.information.pageInfo.currentPage)===(null===(a=i[i.length-1])||void 0===a?void 0:a.information.pageInfo.totalPage)||!1}};var l=n(11867),d=n(2265),u=(0,d.forwardRef)((e,t)=>{let{index:n,name:r,studentNumber:s,bonusPoint:o,minusPoint:i,deletedAt:c}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{ref:t,className:"table rounded-5 w-[1090px] H4-caption h-38 text-nowrap relative align-middle cursor-pointer",children:[(0,a.jsx)("td",{className:"w-[8%]",children:n+1}),(0,a.jsx)("td",{className:"w-[22%]",children:r}),(0,a.jsx)("td",{className:"w-[20%]",children:s}),(0,a.jsx)("td",{className:"w-[17%]",children:o}),(0,a.jsx)("td",{className:"w-[18%]",children:i}),(0,a.jsx)("td",{className:"w-[15%]",children:c.replace(/-/g,".")})]}),(0,a.jsx)("tr",{className:"h-14"})]})}),h=n(73122),m=n(36824),f=e=>{let{list:t,isLoading:n,isEndReached:r,setSize:s}=e,o=(0,m.Z)({isLoading:n,isEndReached:r,onIntersect:()=>s(e=>e+1)});return(0,a.jsxs)("table",{className:"text-nowrap text-center text-gray-grayscale50",children:[(0,a.jsxs)("thead",{className:"table w-[1090px]",children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"H4 w-[8%]",children:"번 호"}),(0,a.jsx)("th",{className:"H4 w-[22%]",children:"이 름"}),(0,a.jsx)("th",{className:"H4 w-[20%]",children:"학 번"}),(0,a.jsx)("th",{className:"H4 w-[17%]",children:"상 점"}),(0,a.jsx)("th",{className:"H4 w-[18%]",children:"벌 점"}),(0,a.jsx)("th",{className:"H4 w-[15%]",children:"탈퇴 날짜"})]}),(0,a.jsx)("tr",{className:"h-15 border-b-1"})]}),t&&t.length>0?(0,a.jsxs)("tbody",{className:"w-[1104px] block h-677 overflow-y-auto scrollbar-table",children:[(0,a.jsx)("tr",{className:"h-15"}),t.map((e,n)=>n===t.length-1?(0,a.jsx)(u,{id:e.id,index:n,name:e.name,studentNumber:e.studentNumber,bonusPoint:e.bonusPoint,minusPoint:e.minusPoint,deletedAt:e.deletedAt,ref:o},n):(0,a.jsx)(u,{id:e.id,index:n,name:e.name,studentNumber:e.studentNumber,bonusPoint:e.bonusPoint,minusPoint:e.minusPoint,deletedAt:e.deletedAt},n))]}):n?(0,a.jsx)("tbody",{}):(0,a.jsx)("tbody",{className:"h-677",children:(0,a.jsx)(h.Z,{colspan:6})})]})},x=()=>{let[e,t]=(0,d.useState)(""),[n,r]=(0,d.useState)(""),[s,o]=(0,d.useState)(!1),u=i(),h=c(n),{withdrawalData:m,isLoading:x,setSize:g,isEndReached:v}=s?h:u;return(0,d.useEffect)(()=>{""===e.trim()&&o(!1)},[e]),(0,a.jsxs)("div",{className:"flex flex-col w-[1145px] relative",children:[(0,a.jsxs)("div",{className:"flex items-center mb-32 w-[1145px]",children:[(0,a.jsx)("div",{className:"flex justify-center w-[1090px]",children:(0,a.jsx)("h1",{className:"H0 text-gray-grayscale50 text-nowrap",children:"탈퇴 회원 관리"})}),(0,a.jsx)("div",{className:"absolute right-0",children:(0,a.jsx)(l.Z,{input:e,setInput:t,placeholder:"이름 또는 학번",handleSearch:()=>{""===e.trim()?o(!1):e===n&&s||(r(e),o(!0))}})})]}),(0,a.jsx)(f,{list:m,isLoading:null!=x&&x,isEndReached:v,setSize:g})]})}},11867:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(57437),r=n(20703),s={src:"/_next/static/media/SearchIcon.fd87d628.png",height:20,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAGFBMVEW7u7vMzMzNzc3Ozs7MzMzLy8vLy8vOzs6cMFoWAAAACHRSTlMBlqENf1hlKKFJ7xkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAwSURBVHicJYpJCgBADMJi7fL/Hw8yOUiQwJQ0wAqIlQELitD3xTLbaTKrVuvyn7l6DrcAeLXaQ4sAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},o=e=>{let{input:t,setInput:n,placeholder:o,handleSearch:i}=e;return(0,a.jsxs)("div",{className:"".concat(t?"border-gray-grayscale50":"border-gray-grayscale30"," focus:border-gray-grayscale40 border-[1.5px] w-380 h-38 flex items-center rounded-5"),children:[(0,a.jsx)("input",{className:"outline-none H4-cation px-12 w-292 h-24  text-gray-grayscale50 placeholder:text-gray-grayscale30",placeholder:o,type:"text",value:t,onChange:e=>{n(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&i&&i()}}),(0,a.jsx)(r.default,{src:s,width:18,height:18,className:"ml-auto mr-9 object-contain",alt:"SearchIcon",onClick:()=>i&&i()})]})}},73122:function(e,t,n){"use strict";var a=n(57437);n(2265),t.Z=e=>{let{colspan:t}=e;return(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t,className:"h-full",children:(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)("h1",{className:"H1 text-gray-grayscale30",children:"리스트가 비었습니다."})})})})}},58640:function(e,t,n){"use strict";n.d(t,{_:function(){return a}});let a="https://www.dormease-dev.kro.kr"},89652:function(e,t,n){"use strict";n.d(t,{L:function(){return a},z:function(){return r}});let a="ACCESS_TOKEN",r="REFRESH_TOKEN"},36824:function(e,t,n){"use strict";var a=n(2265);t.Z=e=>{let{isLoading:t,isEndReached:n,onIntersect:r}=e,s=(0,a.useRef)(null),o=(0,a.useCallback)(e=>{!t&&(s.current&&s.current.disconnect(),s.current=new IntersectionObserver(e=>{e[0].isIntersecting&&!n&&r()}),e&&s.current.observe(e))},[t,n,r]);return(0,a.useEffect)(()=>()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.disconnect()},[]),o}},75518:function(e,t,n){"use strict";var a=n(77871),r=n(89652),s=n(9266);let o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Z.getToken(r.L),o=a.Z.getToken(r.z);if(!n)throw Error("No access token found");let c={...t.headers,Authorization:"Bearer ".concat(n)},l=await fetch(e,{...t,headers:c});if(401===l.status&&o){let n=await (0,s._)(o);if(n){a.Z.saveToken(r.L,n);let s={...c,Authorization:"Bearer ".concat(n)};l=await fetch(e,{...t,headers:s})}else i()}else 401===l.status&&i();if(!l.ok)throw Error("Failed to fetch data");return 204===l.status||201===l.status?{}:l.json()},i=()=>{a.Z.removeToken(r.L),a.Z.removeToken(r.z),alert("세션이 만료되었습니다. 다시 로그인해 주세요."),window.location.href="/"};t.Z=o},77871:function(e,t){"use strict";t.Z={saveToken:(e,t)=>{localStorage.setItem(e,t)},getToken:e=>localStorage.getItem(e),removeToken:e=>{localStorage.removeItem(e)}}}},function(e){e.O(0,[4898,703,4817,2971,8069,1744],function(){return e(e.s=32353)}),_N_E=e.O()}]);