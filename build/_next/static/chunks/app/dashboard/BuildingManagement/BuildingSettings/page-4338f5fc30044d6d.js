(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{375:function(e,t,r){Promise.resolve().then(r.bind(r,6309))},7907:function(e,t,r){"use strict";var a=r(5313);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6309:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var a,l=r(7437),s=r(9881),n=r(8751),i=r(9517),c=r(2265),o=e=>{let{label:t,selected:r=!1,...a}=e;return(0,l.jsx)("button",{...a,className:"H3 w-381 h-61 rounded-b-8 text-white hover:hover-transition ".concat(r?"bg-blue-blue50":"bg-blue-blue30 hover:bg-blue-blue40 active:bg-blue-blue50"),children:t})},u=r(2846);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var d=function(e){return u.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none"},e),a||(a=u.createElement("path",{stroke:"#D83636",strokeLinecap:"round",strokeWidth:2,d:"m10 22 12-12M22 22 10 10"})))},h=r(703),b=e=>{let{id:t,name:r,imageUrl:a,onBuildingOutClick:s,onBuildingSettingsDetail:n}=e;return(0,l.jsxs)("div",{className:"relative w-381 h-241 rounded-8 bg-gray-grayscale5 cursor-pointer",onClick:()=>n(t),children:[null!==a&&(0,l.jsx)(h.default,{className:"rounded-8 cursor-pointer",src:a,alt:r,layout:"fill",objectFit:"cover"}),(0,l.jsx)("div",{className:"absolute bottom-0",children:(0,l.jsx)(o,{label:r,selected:!1})}),(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),s()},children:(0,l.jsx)(d,{className:"absolute right-8 top-8"})})]})},x=r(5407),m=r(8871),f={src:"/_next/static/media/AddBuildingLine.4a63cd90.png",height:2,width:416,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAACVBMVEXl5eXj4+Pm5ua+JgoRAAAAA3RSTlOgJTN0LShPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAADUlEQVR4nGNgZAADJgAAEwAEK5sv6QAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:1},p=r(621),v=e=>{let{onBuildingOutClick:t,onAddBuilding:r,input:a,setInput:s,selectImage:n,setSelectImage:i}=e,o=(0,c.useRef)(null),[u,g]=(0,c.useState)(""),b=()=>{var e;null===(e=o.current)||void 0===e||e.click()};return(0,l.jsxs)("div",{className:"relative w-454 h-681 shadow-2xl rounded-8 flex flex-col items-center bg-white",children:[(0,l.jsx)("button",{onClick:t,children:(0,l.jsx)(d,{className:"absolute right-8 top-8"})}),(0,l.jsxs)("div",{className:"flex flex-col items-center mt-33",children:[(0,l.jsx)("h1",{className:"H1 text-gray-grayscale50 mb-26",children:"건물명"}),(0,l.jsx)("h1",{className:"text-red-red20 mr-auto caption-2",children:"* 필수"}),(0,l.jsx)("input",{required:!0,placeholder:"건물 이름",className:"H2 w-337 h-59 focus:outline-none rounded-20 border-[1.5px] border-gray-grayscale30 px-17 placeholder:text-gray-grayscale30 text-gray-grayscale50",type:"text",value:a,onChange:e=>{e.target.value.length>10&&(e.target.value=e.target.value.slice(0,10)),s(e.target.value)},maxLength:10})]}),(0,l.jsx)(h.default,{src:f,width:415.5,height:1,className:"mt-32 mb-19",alt:"line"}),(0,l.jsxs)("div",{className:"w-415 border-dotted flex flex-col items-center",children:[(0,l.jsx)("h1",{className:"H1",children:"건물사진"}),(0,l.jsxs)("div",{className:"mt-45 w-381 h-241 flex items-center justify-center bg-gray-grayscale5 rounded-8",children:[n?(0,l.jsx)(p.Z,{image:u,onClick:b}):(0,l.jsx)(x.Z,{label:"사진 추가",disabled:!1,variant:"blue",onClick:b}),(0,l.jsx)("input",{id:"fileInput",type:"file",accept:"image/*",style:{display:"none",visibility:"hidden"},ref:o,onChange:e=>{if(!e.target.files||0===e.target.files.length){console.log("파일이 선택되지 않았습니다.");return}let t=e.target.files[0];g(URL.createObjectURL(t)),i(t)}})]})]}),(0,l.jsx)(h.default,{src:f,width:415.5,height:1,className:"mt-32 mb-19",alt:"line"}),(0,l.jsx)("div",{className:"w-415 border-dotted flex flex-col items-center",children:(0,l.jsx)(m.Z,{label:"건물 추가",disabled:""===a,variant:"blue",onClick:r})})]})},j=r(2992),y=r(9088),A=r(6066),w=e=>{let{variant:t,label:r,onConfirm:a}=e,{bgHeader:s}=(e=>{switch(e){case"blue":default:return{bgHeader:"bg-blue-blue30"};case"red":return{bgHeader:"bg-red-red20"};case"green":return{bgHeader:"bg-green-green20"}}})(t);return(0,l.jsxs)("div",{className:"w-456 h-194 flex flex-col items-center rounded-8 shadow-xl bg-white pb-15",children:[(0,l.jsx)(A.Z,{bgColor:s}),(0,l.jsx)(h.default,{src:j.Z,className:"mt-19 mb-16",width:22,height:19,alt:"PromptWarning"}),(0,l.jsx)("h1",{className:"alert-cap text-gray-grayscale50 text-center",children:r.split("\\n").map((e,t)=>(0,l.jsx)("p",{className:"leading-25",children:e},t))}),(0,l.jsx)("div",{className:"ml-auto mt-auto",children:(0,l.jsx)(y.Z,{label:"확인",onClick:a,hoverColor:t})})]})},N=r(1723),k=r(7907),C=()=>{let[e,t]=(0,c.useState)(),[r,a]=(0,c.useState)(!1),[o,u]=(0,c.useState)(!1),[g,d]=(0,c.useState)(!1),[h,x]=(0,c.useState)(!1),[m,f]=(0,c.useState)(""),[p,j]=(0,c.useState)(null),[y,A]=(0,c.useState)(null),C=(0,k.useRouter)(),{data:O,error:E,mutate:S}=(0,s.Xy)();(0,c.useEffect)(()=>{O?t(O.information):console.log(E)},[O,E]);let R=async()=>{try{let e=await (0,s.D5)(m,p);e.check?"동일한 이름의 기숙사가 존재합니다."===e.information.message?a(!0):(await S(),d(!g),f(""),j(null)):alert("실패")}catch(e){console.error(e),alert("오류가 발생했습니다.")}},Z=async e=>{if(null!==e)try{(await (0,s.Pt)(e)).check?(await S(),x(!1),A(null)):console.log("실패")}catch(e){console.error(e),console.log("오류가 발생했습니다.")}};return(0,l.jsx)(c.Suspense,{fallback:(0,l.jsx)("h1",{children:"로딩 중"}),children:(0,l.jsxs)("div",{className:"flex flex-col w-[1200px]",children:[(0,l.jsx)("h1",{className:"H0 text-gray-grayscale50 text-center mb-35",children:"건물 설정"}),(0,l.jsxs)("div",{className:"w-[1220px] grid grid-cols-3 gap-x-20 gap-y-30 min-h-381 max-h-800 overflow-y-auto scrollbar-table",children:[e&&e.map(e=>(0,l.jsx)(b,{id:e.id,name:e.name,imageUrl:e.imageUrl,onBuildingOutClick:()=>{A(e.id),!0===e.assignedResidents?u(!0):x(!0)},onBuildingSettingsDetail:()=>C.push("/dashboard/BuildingManagement/BuildingSettings")},e.id)),(0,l.jsx)(n.Z,{onClick:()=>d(!0)})]}),g&&(0,l.jsx)(i.Z,{isOpen:g,children:(0,l.jsx)(v,{onBuildingOutClick:()=>{f(""),j(null),d(!g)},onAddBuilding:R,input:m,setInput:f,selectImage:p,setSelectImage:j})}),h&&(0,l.jsx)(i.Z,{isOpen:h,children:(0,l.jsx)(N.Z,{variant:"red",label:"건물을 삭제하면 관련 데이터도 함께 삭제됩니다.\\n건물을 삭제하시겠습니까?",onCancel:()=>{x(!1),A(null)},onConfirm:()=>Z(y)})}),o&&(0,l.jsx)(i.Z,{isOpen:o,children:(0,l.jsx)(w,{variant:"red",label:"해당 건물은 배정된 학생이 있습니다.",onConfirm:()=>{u(!1),A(null)}})}),r&&(0,l.jsx)(i.Z,{isOpen:r,children:(0,l.jsx)(w,{variant:"blue",label:"이미 등록되어 있는 건물명입니다.\\n다른 이름을 사용해 주세요.",onConfirm:()=>{a(!1),A(null)}})})]})})}},8751:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a,l=r(7437);r(2265);var s=r(2846);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var i=function(e){return s.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),a||(a=s.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:4.751,d:"M2.999 27h48M27 3v48"})))},c=e=>{let{...t}=e;return(0,l.jsxs)("button",{...t,className:"group flex flex-col justify-center items-center w-381 h-241 rounded-8 bg-gray-grayscale5 hover:hover-transition hover:bg-gray-grayscale10 active:bg-gray-grayscale20",children:[(0,l.jsx)("div",{className:"flex justify-center items-center w-102 h-102 rounded-full bg-gray-grayscale10 group-hover:hover-transition group-hover:bg-gray-grayscale20 group-active:bg-gray-grayscale30",children:(0,l.jsx)(i,{className:"text-gray-grayscale30 group-hover:text-gray-grayscale40 group-hover:hover-transition group-active:text-gray-grayscale50"})}),(0,l.jsx)("h2",{className:"H4 mt-21 w-142 py-5 rounded-full text-white bg-blue-blue30 group-hover:bg-blue-blue40 group-hover:hover-transition group-active:bg-blue-blue50",children:"건물 추가하기"})]})}}},function(e){e.O(0,[703,4898,1252,6830,2971,8069,1744],function(){return e(e.s=375)}),_N_E=e.O()}]);