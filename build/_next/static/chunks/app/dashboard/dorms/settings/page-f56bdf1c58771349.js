(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{65348:function(e,t,r){"use strict";var n,o=r(52846);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none"},e),n||(n=o.createElement("path",{stroke:"#D83636",strokeLinecap:"round",strokeWidth:2,d:"m10 22 12-12M22 22 10 10"})))}},60946:function(e,t,r){Promise.resolve().then(r.bind(r,34339))},47907:function(e,t,r){"use strict";var n=r(15313);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},72671:function(e,t){"use strict";/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=Symbol.for("react.element"),n=(Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),{isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}}),o=Object.assign,a={};function i(e,t,r){this.props=e,this.context=t,this.refs=a,this.updater=r||n}function s(){}function c(e,t,r){this.props=e,this.context=t,this.refs=a,this.updater=r||n}i.prototype.isReactComponent={},i.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},s.prototype=i.prototype;var l=c.prototype=new s;l.constructor=c,o(l,i.prototype),l.isPureReactComponent=!0;var u=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};t.createElement=function(e,t,n){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)u.call(t,o)&&!p.hasOwnProperty(o)&&(a[o]=t[o]);var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){for(var l=Array(c),f=0;f<c;f++)l[f]=arguments[f+2];a.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===a[o]&&(a[o]=c[o]);return{$$typeof:r,type:e,key:i,ref:s,props:a,_owner:null}}},52846:function(e,t,r){"use strict";e.exports=r(72671)},46426:function(e,t){"use strict";t.J=void 0,t.J=(e={})=>{if("undefined"==typeof window)return{persistAtom:()=>{}};let{key:t="recoil-persist",storage:r=localStorage,converter:n=JSON}=e,o=(e,t,r,n)=>{n?delete t[r]:t[r]=e,s(t)},a=()=>{let e=r.getItem(t);return null==e?{}:"string"==typeof e?i(e):"function"==typeof e.then?e.then(i):{}},i=e=>{if(void 0===e)return{};try{return n.parse(e)}catch(e){return console.error(e),{}}},s=e=>{try{"function"==typeof r.mergeItem?r.mergeItem(t,n.stringify(e)):r.setItem(t,n.stringify(e))}catch(e){console.error(e)}};return{persistAtom:({onSet:e,node:t,trigger:r,setSelf:n})=>{if("get"===r){let e=a();"function"==typeof e.then&&e.then(e=>{e.hasOwnProperty(t.key)&&n(e[t.key])}),e.hasOwnProperty(t.key)&&n(e[t.key])}e(async(e,r,n)=>{let i=a();"function"==typeof i.then?i.then(r=>o(e,r,t.key,n)):o(e,i,t.key,n)})}}}},90121:function(e,t,r){"use strict";r.d(t,{GX:function(){return f},IY:function(){return l},JK:function(){return d},KH:function(){return h},LJ:function(){return y},Pl:function(){return u},T_:function(){return g},_p:function(){return s},jh:function(){return c},sY:function(){return p},vh:function(){return i}});var n=r(58640),o=r(81252),a=r(75518);let i=async(e,t)=>{let r=new FormData;return null!==t?r.append("image",t):r.append("image",new Blob([])),await (0,a.Z)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e,"/image"),{method:"POST",body:r})},s=()=>{let{data:e,error:t,mutate:r}=(0,o.ZP)("".concat(n._,"/api/v1/web/dormitory/setting"),a.Z);return{data:e,error:t,isLoading:!t&&!e,mutate:r}},c=async()=>await (0,a.Z)("".concat(n._,"/api/v1/web/dormitory/setting"),{method:"POST"}),l=async e=>await (0,a.Z)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}),u=e=>{let{data:t,error:r,mutate:i}=(0,o.ZP)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e),a.Z);return{data:t,error:r,isLoading:!r&&!t,mutate:i}},p=(e,t)=>{let{data:r,error:i,mutate:s}=(0,o.ZP)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e,"/").concat(t,"/room"),a.Z);return{data:r,error:i,isLoading:!i&&!r,mutate:s}},f=async(e,t)=>await (0,a.Z)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e,"/").concat(t,"/room"),{method:"DELETE",headers:{"Content-Type":"application/json"}}),d=async(e,t)=>await (0,a.Z)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e,"/name"),{method:"PUT",body:JSON.stringify({name:t}),headers:{"Content-Type":"application/json"}}),y=async(e,t,r)=>await (0,a.Z)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e,"/").concat(t,"/room"),{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}),h=async(e,t,r)=>await (0,a.Z)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e,"/").concat(t,"/room"),{method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}),g=async(e,t,r)=>await (0,a.Z)("".concat(n._,"/api/v1/web/dormitory/setting/").concat(e,"/room/copy"),{method:"POST",body:JSON.stringify({originalFloor:t,newFloor:r}),headers:{"Content-Type":"application/json"}})},34339:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(57437),o=r(90121),a=r(38751),i=r(79517),s=r(2265),c=e=>{let{label:t,selected:r=!1,...o}=e;return(0,n.jsx)("button",{...o,className:"H3 w-381 h-61 rounded-b-8 text-white hover:hover-transition ".concat(r?"bg-blue-blue50":"bg-blue-blue30 hover:bg-blue-blue40 active:bg-blue-blue50"),children:t})},l=r(65348),u=r(20703),p=e=>{let{id:t,name:r,imageUrl:o,onBuildingOutClick:a,onBuildingSettingsDetail:i}=e;return(0,n.jsxs)("div",{className:"relative w-381 h-241 rounded-8 bg-gray-grayscale5 cursor-pointer",onClick:()=>i(t),children:[null!==o&&(0,n.jsx)(u.default,{className:"rounded-8 cursor-pointer",src:o,alt:r,fill:!0,priority:!0,style:{objectFit:"cover"}}),(0,n.jsx)("div",{className:"absolute bottom-0",children:(0,n.jsx)(c,{label:r,selected:!1})}),(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},children:(0,n.jsx)(l.Z,{className:"absolute right-8 top-8"})})]})},f=r(42825),d=r(91723),y=r(43721),h=r(47907),g=r(32153),m=()=>{let[e,t]=(0,s.useState)(),[r,c]=(0,s.useState)(!1),[l,u]=(0,s.useState)(!1),[m,b]=(0,s.useState)(null),v=(0,h.useRouter)(),w=(0,g.Zl)(y.S),{data:j,error:x,mutate:S}=(0,o._p)();(0,s.useEffect)(()=>{j?t(j.information):console.log(x)},[j,x]);let k=async()=>{try{(await (0,o.jh)()).check&&await S()}catch(e){console.error(e)}},O=async e=>{if(null!==e)try{(await (0,o.IY)(e)).check?(await S(),u(!1),b(null)):console.log("실패")}catch(e){console.error(e),console.log("오류가 발생했습니다.")}};return(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)("h1",{children:"로딩 중"}),children:(0,n.jsxs)("div",{className:"flex flex-col w-[1200px]",children:[(0,n.jsx)("h1",{className:"H0 text-gray-grayscale50 text-center mb-35",children:"건물 설정"}),(0,n.jsxs)("div",{className:"w-[1220px] grid grid-cols-3 gap-x-20 gap-y-30 min-h-381 max-h-800 overflow-y-auto scrollbar-table",children:[e&&e.map((e,t)=>(0,n.jsx)(p,{id:e.id,name:e.name,imageUrl:e.imageUrl,onBuildingOutClick:()=>{b(e.id),!0===e.assignedResidents?c(!0):u(!0)},onBuildingSettingsDetail:()=>{w(e.id),v.push("/dashboard/dorms/settings/details")}},t)),e&&(null==e?void 0:e.length)<15&&(0,n.jsx)(a.Z,{onClick:k})]}),l&&(0,n.jsx)(i.Z,{isOpen:l,children:(0,n.jsx)(d.Z,{variant:"red",label:"건물을 삭제하면 관련 데이터도 함께 삭제됩니다.\\n건물을 삭제하시겠습니까?",onCancel:()=>{u(!1),b(null)},onConfirm:()=>O(m)})}),r&&(0,n.jsx)(i.Z,{isOpen:r,children:(0,n.jsx)(f.Z,{variant:"red",label:"해당 건물은 배정된 학생이 있습니다.",onConfirm:()=>{c(!1),b(null)}})})]})})}},38751:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n,o=r(57437);r(2265);var a=r(52846);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var s=function(e){return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),n||(n=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:4.751,d:"M2.999 27h48M27 3v48"})))},c=e=>{let{...t}=e;return(0,o.jsxs)("button",{...t,className:"group flex flex-col justify-center items-center w-381 h-241 rounded-8 bg-gray-grayscale5 hover:hover-transition hover:bg-gray-grayscale10 active:bg-gray-grayscale20",children:[(0,o.jsx)("div",{className:"flex justify-center items-center w-102 h-102 rounded-full bg-gray-grayscale10 group-hover:hover-transition group-hover:bg-gray-grayscale20 group-active:bg-gray-grayscale30",children:(0,o.jsx)(s,{className:"text-gray-grayscale30 group-hover:text-gray-grayscale40 group-hover:hover-transition group-active:text-gray-grayscale50"})}),(0,o.jsx)("h2",{className:"H4 mt-21 w-142 py-5 rounded-full text-white bg-blue-blue30 group-hover:bg-blue-blue40 group-hover:hover-transition group-active:bg-blue-blue50",children:"건물 추가하기"})]})}},43721:function(e,t,r){"use strict";r.d(t,{S:function(){return s}});var n=r(46426),o=r(32153);let a=window.sessionStorage,{persistAtom:i}=(0,n.J)({key:"settingIdState",storage:a}),s=(0,o.cn)({key:"settingIdState",default:0,effects_UNSTABLE:[i]})}},function(e){e.O(0,[691,4898,703,1252,5418,2971,8069,1744],function(){return e(e.s=60946)}),_N_E=e.O()}]);