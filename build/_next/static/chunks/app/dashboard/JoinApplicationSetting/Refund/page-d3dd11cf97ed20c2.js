(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99],{6659:function(e,t,r){Promise.resolve().then(r.bind(r,5459))},5459:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(7437),s=r(2265),n=r(1371),l=e=>{let{isLastItem:t,clickSchoolNumber:r,onStudentClick:s,onDeleteRefund:l,refundRequestmentId:i,residentName:c,studentNumber:o,phoneNumber:d,bankName:u,accountNumber:h,term:m,exitDate:g,createDate:b,dormitoryName:A,roomNumber:x,bedNumber:v}=e;return(0,a.jsxs)("div",{className:"flex items-center relative ".concat(!t&&"border-b-1 border-gray-grayscale30"),children:[(0,a.jsxs)("div",{className:"my-8 flex items-center rounded-5 w-full H4-caption h-38 text-nowrap cursor-pointer ".concat(r===i?"bg-gray-grayscale20":"hover:bg-gray-grayscale10 active:bg-gray-grayscale20"),onClick:()=>s(i),children:[(0,a.jsx)("div",{className:"w-[6%]",children:c}),(0,a.jsx)("div",{className:"w-[10%]",children:o}),(0,a.jsx)("div",{className:"w-[12%]",children:d}),(0,a.jsx)("div",{className:"w-[8%]",children:u}),(0,a.jsx)("div",{className:"w-[12%]",children:h}),(0,a.jsx)("div",{className:"w-[8%]",children:m}),(0,a.jsx)("div",{className:"w-[9%]",children:g}),(0,a.jsx)("div",{className:"w-[9%]",children:b}),(0,a.jsx)("div",{className:"w-[12%]",children:A}),(0,a.jsx)("div",{className:"w-[7%]",children:x}),(0,a.jsx)("div",{className:"w-[7%]",children:v})]}),(0,a.jsx)("div",{className:"absolute -right-87",children:(0,a.jsx)(n.Z,{label:"처리",disabled:r!==i,selected:!1,variant:"blue",onClick:l})})]})},i=r(3122),c=e=>{let{list:t,clickSchoolNumber:r,onDeleteRefund:s,onStudentClick:n}=e;return(0,a.jsxs)("div",{className:"text-nowrap text-center text-gray-grayscale50 c",children:[(0,a.jsxs)("div",{className:"flex w-full border-b-1 pb-15",children:[(0,a.jsx)("div",{className:"H4 w-[6%]",children:"이 름"}),(0,a.jsx)("div",{className:"H4 w-[10%]",children:"학 번"}),(0,a.jsx)("div",{className:"H4 w-[12%]",children:"휴대전화"}),(0,a.jsx)("div",{className:"H4 w-[8%]",children:"은행명"}),(0,a.jsx)("div",{className:"H4 w-[12%]",children:"계좌번호"}),(0,a.jsx)("div",{className:"H4 w-[8%]",children:"기간"}),(0,a.jsx)("div",{className:"H4 w-[9%]",children:"퇴사 예정일"}),(0,a.jsx)("div",{className:"H4 w-[9%]",children:"신청날짜"}),(0,a.jsx)("div",{className:"H4 w-[12%]",children:"건 물"}),(0,a.jsx)("div",{className:"H4 w-[7%]",children:"호 실"}),(0,a.jsx)("div",{className:"H4 w-[7%]",children:"침대번호"})]}),(0,a.jsx)("div",{className:"w-full",children:t?(0,a.jsx)(a.Fragment,{children:t.map((e,i)=>{let c=i===t.length-1;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l,{isLastItem:c,refundRequestmentId:e.refundRequestmentId,residentName:e.residentName,studentNumber:e.studentNumber,phoneNumber:e.phoneNumber,bankName:e.bankName,accountNumber:e.accountNumber,term:e.term,exitDate:e.exitDate,createDate:e.createDate,dormitoryName:e.dormitoryName,roomNumber:e.roomNumber,bedNumber:e.bedNumber,clickSchoolNumber:r,onStudentClick:n,onDeleteRefund:s},i),c&&(0,a.jsx)("div",{className:"mt-13 border-b-1 border-gray-grayscale50"})]})})}):(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)(i.Z,{colspan:11})})})]})},o=r(1299),d=r(721),u=r(8640),h=r(7124),m=r(1252);let g=e=>{let{data:t,error:r}=(0,m.ZP)("".concat(u._,"/api/v1/web/refundRequestment/residents?page=").concat(e),h.Z);return{data:t,error:r,isLoading:!r&&!t}},b=async(e,t,r)=>await (0,h.Z)("".concat(u._,"/api/v1/web/period"),{method:"POST",body:JSON.stringify({startDate:e,endDate:t,periodType:r})}),A=async e=>await (0,h.Z)("".concat(u._,"/api/v1/web/refundRequestment/").concat(e),{method:"DELETE"});var x=r(9517),v=r(1723),w=()=>{let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(1),[l,i]=(0,s.useState)(0),[u,h]=(0,s.useState)(void 0),[m,w]=(0,s.useState)(void 0),[f,N]=(0,s.useState)(!1),[j,p]=(0,s.useState)(!1),[y,C]=(0,s.useState)(0),{data:E,error:S,isLoading:Z}=g(r);(0,s.useEffect)(()=>{E?(t(E.information.dataList),i(E.information.pageInfo.totalPage)):console.log(S)},[E,S]);let H=async()=>{if(u&&m)try{let e=await b(u.toISOString().split("T")[0],m.toISOString().split("T")[0],"REFUND");console.log(e.information.message),N(!f)}catch(e){console.error("Error posting period:",e)}},k=async()=>{console.log(await A(y))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col w-[1396px]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-32",children:[(0,a.jsx)("h1",{className:"H0 text-gray-grayscale50 text-nowrap",children:"환불 신청"}),(0,a.jsx)(d.Z,{title:"환불 신청 기간",startDate:u,endDate:m,setStartDate:h,setEndDate:w,handlePosting:()=>N(!f)})]}),(0,a.jsx)(c,{list:e,clickSchoolNumber:y,onStudentClick:e=>{C(e)},onDeleteRefund:()=>p(!j)}),e&&(0,a.jsx)("div",{className:"mt-27 flex justify-center",children:(0,a.jsx)(o.Z,{pageNum:r,pageTotalNum:l,setPageNum:e=>{"prev"===e&&r>1?n(r-1):"next"===e&&r<l&&n(r+1)}})})]}),f&&(0,a.jsx)(x.Z,{isOpen:f,children:(0,a.jsx)(v.Z,{variant:"blue",label:"환불 신청 기간을 게시하시겠습니까?",onConfirm:H,onCancel:()=>N(!f)})}),j&&(0,a.jsx)(x.Z,{isOpen:j,children:(0,a.jsx)(v.Z,{variant:"blue",label:"선택한 인원에 대해 환불을 진행하겠습니까?",onConfirm:k,onCancel:()=>p(!j)})})]})}},9088:function(e,t,r){"use strict";var a=r(7437);t.Z=e=>{let{label:t,onClick:r,hoverColor:s}=e,{btnHoverColor:n}=(e=>{switch(e){case"blue":default:return{btnHoverColor:"hover:bg-blue-blue30"};case"gray":return{btnHoverColor:"hover:bg-gray-grayscale20"};case"red":return{btnHoverColor:"hover:bg-red-red20"};case"green":return{btnHoverColor:"hover:bg-green-green20"}}})(s);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("button",{onClick:r,className:"mr-16 w-86 h-32 rounded-20 ".concat(n," hover-transition"),children:"gray"===s?(0,a.jsx)("h1",{className:"H4 text-gray-grayscale40",children:t}):(0,a.jsx)("h1",{className:"H4 text-gray-grayscale40  hover:text-white",children:t})})})}},1371:function(e,t,r){"use strict";var a=r(7437);r(2265),t.Z=e=>{let{label:t,disabled:r,selected:s=!1,variant:n,...l}=e;return(0,a.jsx)("button",{...l,disabled:r,className:"H4 w-79 h-34 rounded-full text-white hover:hover-transition ".concat((e=>{switch(e){case"blue":return"".concat(s?"bg-blue-blue50":"bg-blue-blue30 disabled:bg-blue-blue20 hover:bg-blue-blue40 active:bg-blue-blue50");case"red":return"".concat(s?"bg-red-red40":"bg-red-red20 disabled:bg-red-red10 hover:bg-red-red30 active:bg-red-red40");default:return""}})(n)),children:t})}},1299:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a,s,n=r(7437);r(2265);var l=r(2846);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var c=function(e){return l.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:10,height:17,fill:"none"},e),a||(a=l.createElement("path",{fill:"currentColor",d:"m.42 9.531 6.828 6.827c.77.77 2.086.225 2.086-.864V1.84C9.334.75 8.018.206 7.248.976L.42 7.803a1.22 1.22 0 0 0 0 1.728"})))};function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var d=function(e){return l.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:10,height:17,fill:"none"},e),s||(s=l.createElement("path",{fill:"currentColor",d:"M9.58 7.803 2.752.976C1.982.206.666.75.666 1.84v13.654c0 1.089 1.317 1.634 2.086.864L9.58 9.531a1.22 1.22 0 0 0 0-1.728"})))},u=e=>{let{pageNum:t,pageTotalNum:r,setPageNum:a}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-27",children:[(0,n.jsx)("button",{disabled:!(t>1),className:"group",onClick:()=>a("prev"),children:(0,n.jsx)(c,{className:"text-blue-blue30 group-disabled:text-blue-blue20"})}),(0,n.jsx)("div",{className:"caption1 text-gray-grayscale40 pt-1",children:t}),(0,n.jsx)("button",{disabled:!(t<r),className:"group",onClick:()=>a("next"),children:(0,n.jsx)(d,{className:"text-blue-blue30 group-disabled:text-blue-blue20"})})]})}},6066:function(e,t,r){"use strict";var a=r(7437),s=r(703),n=r(5343),l=r(2866);r(2265),t.Z=e=>{let{bgColor:t}=e;return(0,a.jsxs)("div",{className:"".concat(t||"bg-blue-blue30"," w-full h-39  flex justify-between pl-15 rounded-t-8"),children:[(0,a.jsx)(s.default,{src:n.Z,alt:"PromptLogo",className:"object-contain",width:39,height:11.65}),(0,a.jsx)("button",{className:"hover:bg-red-red30 ".concat(t||"bg-blue-blue30"," w-39 h-39 flex items-center justify-center rounded-tr-8 hover-transition"),children:(0,a.jsx)(s.default,{src:l.Z,alt:"PromptOut",className:"object-contain",width:10,height:10})})]})}},9517:function(e,t,r){"use strict";var a=r(7437),s=r(2265);t.Z=e=>{let{children:t,isOpen:r}=e;return(0,s.useEffect)(()=>(r?window.document.body.style.overflow="hidden":window.document.body.style.overflow="auto",()=>{window.document.body.style.overflow="auto"}),[r]),(0,a.jsx)("div",{className:"fixed z-backdrop top-0 left-0 w-full h-full bg-[#00000040] z-100 flex justify-center items-center",children:null!=t?t:null})}},721:function(e,t,r){"use strict";var a=r(7437);r(2265);var s=r(1371);t.Z=e=>{let{title:t,startDate:r,endDate:n,setStartDate:l,setEndDate:i,handlePosting:c}=e;return(0,a.jsxs)("div",{className:"flex items-center h-52 rounded-8 bg-gray-grayscale10 px-21 justify-between",children:[(0,a.jsx)("h1",{className:"H4 text-gray-grayscale50 mr-15",children:t}),(0,a.jsx)("input",{value:r?r.toISOString().split("T")[0]:"",onChange:e=>{l(new Date(e.target.value))},type:"date",className:"w-133 h-34 rounded-8 bg-white outline-none px-8 box-border"}),(0,a.jsx)("h2",{className:"H4 text-gray-grayscale50 mx-14",children:"~"}),(0,a.jsx)("input",{value:n?n.toISOString().split("T")[0]:"",onChange:e=>{i(new Date(e.target.value))},type:"date",className:"w-133 h-34 rounded-8 bg-white outline-none px-8 box-border mr-13"}),(0,a.jsx)(s.Z,{onClick:c,label:"게시",disabled:void 0===r||void 0===n,selected:!1,variant:"blue"})]})}},3122:function(e,t,r){"use strict";var a=r(7437);r(2265),t.Z=e=>{let{colspan:t}=e;return(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t,className:"h-full",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-693",children:(0,a.jsx)("h1",{className:"H1 text-gray-grayscale30",children:"리스트가 비었습니다."})})})})}},1723:function(e,t,r){"use strict";var a=r(7437),s=r(703),n=r(2992),l=r(9088),i=r(6066);t.Z=e=>{let{variant:t,label:r,onCancel:c,onConfirm:o}=e,{bgHeader:d}=(e=>{switch(e){case"blue":default:return{bgHeader:"bg-blue-blue30"};case"red":return{bgHeader:"bg-red-red20"};case"green":return{bgHeader:"bg-green-green20"}}})(t);return(0,a.jsxs)("div",{className:"w-456 h-194 flex flex-col items-center rounded-8 shadow-xl bg-white pb-15",children:[(0,a.jsx)(i.Z,{bgColor:d}),(0,a.jsx)(s.default,{src:n.Z,className:"mt-19 mb-16",width:22,height:19,alt:"PromptWarning"}),(0,a.jsx)("h1",{className:"alert-cap text-gray-grayscale50 text-center",children:r.split("\\n").map((e,t)=>(0,a.jsx)("p",{className:"leading-25",children:e},t))}),(0,a.jsxs)("div",{className:"ml-auto mt-auto",children:[(0,a.jsx)(l.Z,{label:"취소",onClick:c,hoverColor:"gray"}),(0,a.jsx)(l.Z,{label:"확인",onClick:o,hoverColor:t})]})]})}},8640:function(e,t,r){"use strict";r.d(t,{_:function(){return a}});let a="https://www.dormease-dev.kro.kr"},9652:function(e,t,r){"use strict";r.d(t,{L:function(){return a},z:function(){return s}});let a="ACCESS_TOKEN",s="REFRESH_TOKEN"},7124:function(e,t,r){"use strict";var a=r(7871),s=r(9652);let n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.Z.getToken(s.L);if(!r)throw Error("No access token found");let n={...t.headers,Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},l=await fetch(e,{...t,headers:n});if(!l.ok)throw 401===l.status&&(a.Z.removeToken(s.L),a.Z.removeToken(s.z),alert("세션이 만료되었습니다. 다시 로그인해 주세요.")),Error("Failed to fetch data");return l.json()};t.Z=n},7871:function(e,t){"use strict";t.Z={saveToken:(e,t)=>{localStorage.setItem(e,t)},getToken:e=>localStorage.getItem(e),removeToken:e=>{localStorage.removeItem(e)}}},5343:function(e,t){"use strict";t.Z={src:"/_next/static/media/PromptLogo.692c0d92.png",height:13,width:39,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAHlBMVEX///////////////////////////////////////8V2MxSAAAACnRSTlPlmoJy+43FvWlJljCSDAAAAAlwSFlzAAALEwAACxMBAJqcGAAAACFJREFUeJwFwYEBADAIwrDCxOn/D5vAhDw+2qanBFbF9gEEtABSm4AZFAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3}},2866:function(e,t){"use strict";t.Z={src:"/_next/static/media/PromptOut.98b7927a.png",height:12,width:12,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAElBMVEX///////////////9MaXH///91ewZhAAAABnRSTlNA0QMxAHpSp+N/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKUlEQVR4nEWLsQ0AMAyDcEz/f7lT0w0J4OCMHAhKQNIGGZvU+bBq47dfE2gAiTtnxw0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},2992:function(e,t){"use strict";t.Z={src:"/_next/static/media/PromptWarning.99ab5e8b.png",height:21,width:24,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAHlBMVEXXNTXXNTVMaXHWNTXXNTXXNTWqVVXUODjYNzfWNTXpH04wAAAACnRSTlN9jQA8LFoDEkykCmOTUQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAC9JREFUeJwdwYkNADAMAjE4SJ/9F65UW4ANaDEzwxLbiTdCOSdCNQmuXBoqXX33ARTdAKE2+uYqAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7}}},function(e){e.O(0,[703,898,964,971,69,744],function(){return e(e.s=6659)}),_N_E=e.O()}]);